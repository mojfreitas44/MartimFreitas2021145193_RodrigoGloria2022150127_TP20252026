// ... (parte inicial igual ao exemplo do WebCar, mas com namespace GestaoLoja)

    public async Task RegisterUser(EditContext editContext)
    {
        var user = CreateUser();
        await UserStore.SetUserNameAsync(user, Input.Email, CancellationToken.None);

        // ADAPTAÇÃO: Usar a tua propriedade IsAtivo
        user.IsAtivo = false; // Fica pendente de aprovação

        // Se tiveres campo Nome no ApplicationUser do MyCOLL, descomenta:
        // user.Nome = Input.Name;

        var emailStore = GetEmailStore();
        await emailStore.SetEmailAsync(user, Input.Email, CancellationToken.None);

        var result = await UserManager.CreateAsync(user, Input.Password);

        if (!result.Succeeded)
        {
            identityErrors = result.Errors;
            return;
        }

        // Atribuir Role de Funcionário automaticamente (mas inativo)
        // Certifica-te que a role "Funcionario" existe na BD (SeedData)
        var roleResult = await UserManager.AddToRoleAsync(user, "Funcionario");

        if (!roleResult.Succeeded)
        {
            identityErrors = roleResult.Errors;
            return;
        }

        Logger.LogInformation("User created a new account with password.");

        // Redirecionar para confirmação ou login com aviso
        if (UserManager.Options.SignIn.RequireConfirmedAccount)
        {
            RedirectManager.RedirectTo("Account/RegisterConfirmation", new() { ["email"] = Input.Email, ["returnUrl"] = ReturnUrl });
        }
        else
        {
            // Como está inativo, não fazemos login automático.
            // Mandamos para o login com uma mensagem (opcional) ou para a página de confirmação
             RedirectManager.RedirectTo("Account/Login");
        }
    }